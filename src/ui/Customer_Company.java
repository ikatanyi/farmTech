/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package ui;

import ca.odell.glazedlists.GlazedLists;
import ca.odell.glazedlists.swing.AutoCompleteSupport;
import classes.superCls;
import custom_jPanels.RoundRectGradientPanel;
import custom_jPanels.SimpleGradientPanel;
import farm.entity.DtCustCompany;
import farm.entity.DtGuarantors;
import farmTech.util.HibernateUtil;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Transaction;

/**
 *
 * @author Kent
 */
public class Customer_Company extends javax.swing.JInternalFrame {

    /**
     * Creates new form Customer_Company
     */
    private JLabel errorFields;
    private String userid;
    private Object[] customerid;
    AutoCompleteSupport type;
    superCls sup=new superCls();
    public Customer_Company() {
        initComponents();
        cmbCustname.setModel(searchCompany());
        
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel4 = new SimpleGradientPanel();
        jLabel27 = new javax.swing.JLabel();
        cmbCustname = new javax.swing.JComboBox();
        jLabel28 = new javax.swing.JLabel();
        txtbalance = new javax.swing.JTextField();
        jLabel29 = new javax.swing.JLabel();
        jDateChooser3 = new com.toedter.calendar.JDateChooser();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel6 = new RoundRectGradientPanel();
        jLabel30 = new javax.swing.JLabel();
        jLabel33 = new javax.swing.JLabel();
        jLabel34 = new javax.swing.JLabel();
        txtCname = new javax.swing.JTextField();
        txtfname = new javax.swing.JTextField();
        txtlname = new javax.swing.JTextField();
        jLabel36 = new javax.swing.JLabel();
        jLabel37 = new javax.swing.JLabel();
        jLabel39 = new javax.swing.JLabel();
        jLabel40 = new javax.swing.JLabel();
        jLabel41 = new javax.swing.JLabel();
        jLabel42 = new javax.swing.JLabel();
        jLabel43 = new javax.swing.JLabel();
        txtcontact = new javax.swing.JTextField();
        txtCphone = new javax.swing.JTextField();
        txtCfax = new javax.swing.JTextField();
        txtaltphone = new javax.swing.JTextField();
        txtaltcontact = new javax.swing.JTextField();
        txtCemail = new javax.swing.JTextField();
        txtCcc = new javax.swing.JTextField();
        jLabel46 = new javax.swing.JLabel();
        jLabel51 = new javax.swing.JLabel();
        jLabel52 = new javax.swing.JLabel();
        jLabel35 = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        txtABill = new javax.swing.JTextArea();
        jLabel58 = new javax.swing.JLabel();
        jPanel7 = new RoundRectGradientPanel();
        jLabel32 = new javax.swing.JLabel();
        jScrollPane4 = new javax.swing.JScrollPane();
        txtterms = new javax.swing.JTextArea();
        jLabel44 = new javax.swing.JLabel();
        jScrollPane5 = new javax.swing.JScrollPane();
        txtcomment = new javax.swing.JTextArea();
        jLabel45 = new javax.swing.JLabel();
        cmbmail = new javax.swing.JComboBox();
        jButton10 = new javax.swing.JButton();
        jButton11 = new javax.swing.JButton();
        jButton12 = new javax.swing.JButton();
        jButton9 = new javax.swing.JButton();
        jButton7 = new javax.swing.JButton();
        jButton8 = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JSeparator();

        setClosable(true);
        setIconifiable(true);
        setResizable(true);
        setTitle("Customer Company");
        setFrameIcon(new javax.swing.ImageIcon(getClass().getResource("/images/ox-cow.png"))); // NOI18N

        jPanel4.setName("card2"); // NOI18N

        jLabel27.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel27.setText("Customer Name :");

        cmbCustname.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        cmbCustname.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cmbCustnameItemStateChanged(evt);
            }
        });
        cmbCustname.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                cmbCustnameKeyReleased(evt);
            }
        });

        jLabel28.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel28.setText("Balance :");

        txtbalance.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        jLabel29.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel29.setText("as of :");

        jDateChooser3.setDate(new Date());
        jDateChooser3.setDateFormatString("dd-MM-yyyy");
        jDateChooser3.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                jDateChooser3PropertyChange(evt);
            }
        });

        jLabel30.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel30.setText("Company Name :");

        jLabel33.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel33.setText("First Name : ");

        jLabel34.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel34.setText("Last Name :");

        txtCname.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtfname.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtlname.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        jLabel36.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel36.setText("Contact :");

        jLabel37.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel37.setText("Phone :");

        jLabel39.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel39.setText("Fax :");

        jLabel40.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel40.setText("Alt. Phone :");

        jLabel41.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel41.setText("Alt.Contact :");

        jLabel42.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel42.setText("Email :");

        jLabel43.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel43.setText("Cc :");

        txtcontact.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtCphone.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtCfax.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtCfax.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtCfaxActionPerformed(evt);
            }
        });

        txtaltphone.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtaltcontact.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtCemail.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        txtCcc.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N

        jLabel46.setForeground(new java.awt.Color(255, 51, 51));
        jLabel46.setText("*");

        jLabel51.setForeground(new java.awt.Color(255, 51, 51));
        jLabel51.setText("*");

        jLabel52.setForeground(new java.awt.Color(255, 51, 51));
        jLabel52.setText("*");

        jLabel35.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel35.setText("Bill To:");

        txtABill.setColumns(20);
        txtABill.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtABill.setRows(5);
        jScrollPane3.setViewportView(txtABill);

        jLabel58.setFont(new java.awt.Font("Segoe UI", 0, 10)); // NOI18N
        jLabel58.setForeground(new java.awt.Color(255, 51, 51));
        jLabel58.setText("*  required fields");

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel46)
                            .addComponent(jLabel51)
                            .addComponent(jLabel52))
                        .addGap(7, 7, 7)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel6Layout.createSequentialGroup()
                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel30, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel33)
                                    .addComponent(jLabel34)
                                    .addComponent(jLabel36)
                                    .addComponent(jLabel37)
                                    .addComponent(jLabel42)
                                    .addComponent(jLabel35))
                                .addGap(7, 7, 7)
                                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtCname, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtfname, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtlname, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtcontact, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtCphone, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(txtCemail, javax.swing.GroupLayout.PREFERRED_SIZE, 229, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 321, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(23, 23, 23)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel40)
                            .addComponent(jLabel41)
                            .addComponent(jLabel43)
                            .addComponent(jLabel39))
                        .addGap(2, 2, 2)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtCfax, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtaltphone, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtaltcontact, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtCcc, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(592, 592, 592)
                        .addComponent(jLabel58)))
                .addContainerGap(56, Short.MAX_VALUE))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(7, 7, 7)
                        .addComponent(jLabel46))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel30))
                    .addComponent(txtCname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel39))
                    .addComponent(txtCfax, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtfname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtaltphone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel33)
                            .addComponent(jLabel40))))
                .addGap(5, 5, 5)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtlname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtaltcontact, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel34)
                            .addComponent(jLabel41))))
                .addGap(5, 5, 5)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(7, 7, 7)
                        .addComponent(jLabel51))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel36))
                    .addComponent(txtcontact, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel43))
                    .addComponent(txtCcc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(7, 7, 7)
                        .addComponent(jLabel52))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel37))
                    .addComponent(txtCphone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(3, 3, 3)
                        .addComponent(jLabel42))
                    .addComponent(txtCemail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGap(90, 90, 90)
                        .addComponent(jLabel58)
                        .addContainerGap(55, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jLabel35)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(20, 20, 20))))
        );

        jTabbedPane1.addTab("General Info.", jPanel6);

        jLabel32.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel32.setText("Terms :");

        txtterms.setColumns(20);
        txtterms.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtterms.setRows(5);
        jScrollPane4.setViewportView(txtterms);

        jLabel44.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel44.setText("Comment :");

        txtcomment.setColumns(20);
        txtcomment.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtcomment.setRows(5);
        jScrollPane5.setViewportView(txtcomment);

        jLabel45.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel45.setText("Send Method :");

        cmbmail.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        cmbmail.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Mail", "Email", " " }));

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel32)
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 487, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel44)
                    .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 434, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addComponent(jLabel45)
                        .addGap(16, 16, 16)
                        .addComponent(cmbmail, javax.swing.GroupLayout.PREFERRED_SIZE, 161, javax.swing.GroupLayout.PREFERRED_SIZE))))
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jLabel32)
                .addGap(7, 7, 7)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(5, 5, 5)
                .addComponent(jLabel44)
                .addGap(16, 16, 16)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(42, 42, 42)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addGap(6, 6, 6)
                        .addComponent(jLabel45, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(cmbmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(20, 20, 20))
        );

        jTabbedPane1.addTab("Additional Info.", jPanel7);

        jButton10.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton10.setText("Save");
        jButton10.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton10ActionPerformed(evt);
            }
        });

        jButton11.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton11.setText("Cancel");
        jButton11.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton11ActionPerformed(evt);
            }
        });

        jButton12.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton12.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/cancel.png"))); // NOI18N
        jButton12.setText("Exit");
        jButton12.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton12ActionPerformed(evt);
            }
        });

        jButton9.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton9.setText("Delete");
        jButton9.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton9ActionPerformed(evt);
            }
        });

        jButton7.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton7.setText("New");
        jButton7.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton7ActionPerformed(evt);
            }
        });

        jButton8.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton8.setText("Edit");
        jButton8.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton8ActionPerformed(evt);
            }
        });

        cmbCustname.getEditor().getEditorComponent().addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) { 
                cmbCustnameKeyReleased(evt);
            } });

            javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
            jPanel4.setLayout(jPanel4Layout);
            jPanel4Layout.setHorizontalGroup(
                jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel4Layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addComponent(jTabbedPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 724, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jButton10, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jButton11)
                                .addComponent(jButton9)
                                .addComponent(jButton7)
                                .addComponent(jButton8)
                                .addComponent(jButton12)))
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addComponent(jLabel27)
                            .addGap(10, 10, 10)
                            .addComponent(cmbCustname, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addComponent(jLabel28, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(10, 10, 10)
                            .addComponent(txtbalance, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(10, 10, 10)
                            .addComponent(jLabel29)
                            .addGap(10, 10, 10)
                            .addComponent(jDateChooser3, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(jSeparator1))
                    .addGap(10, 10, 10))
            );

            jPanel4Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton10, jButton11, jButton12, jButton7, jButton8, jButton9});

            jPanel4Layout.setVerticalGroup(
                jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel4Layout.createSequentialGroup()
                    .addGap(20, 20, 20)
                    .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addGap(6, 6, 6)
                            .addComponent(jLabel27))
                        .addComponent(cmbCustname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGap(8, 8, 8)
                    .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addGap(6, 6, 6)
                            .addComponent(jLabel28))
                        .addComponent(txtbalance, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addGap(6, 6, 6)
                            .addComponent(jLabel29))
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addGap(1, 1, 1)
                            .addComponent(jDateChooser3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGap(12, 12, 12)
                    .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel4Layout.createSequentialGroup()
                            .addGap(34, 34, 34)
                            .addComponent(jButton10)
                            .addGap(4, 4, 4)
                            .addComponent(jButton7)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton8)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton9)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton11)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jButton12)
                            .addContainerGap(175, Short.MAX_VALUE))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel4Layout.createSequentialGroup()
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jTabbedPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 359, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addContainerGap())))
            );

            jButton8.getAccessibleContext().setAccessibleParent(jPanel6);

            getContentPane().add(jPanel4, java.awt.BorderLayout.CENTER);

            pack();
        }// </editor-fold>//GEN-END:initComponents

    public void getUserid(String userid){
        this.userid=userid;
    }
    
    
    private DtCustCompany find_company(int id){
       org.hibernate.Session session = HibernateUtil.getSessionFactory().openSession();
       Transaction tx = null;
       DtCustCompany company=null;
       boolean status=false;
      try{
         tx = session.beginTransaction();
         company = (DtCustCompany)session.get(DtCustCompany.class, id); 
         tx.commit();
         status=true;
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+e.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE); 
      }finally {
         session.close(); 
      }
        return company;
   }
    
    private DefaultComboBoxModel searchCompany () {                 
     int i=0;
     DefaultComboBoxModel tmodel =new DefaultComboBoxModel();
     org.hibernate.Session session = HibernateUtil.getSessionFactory().openSession();
     try {        
           session.beginTransaction();
           Query q = session.createQuery("SELECT DISTINCT c.companyName,c.id FROM DtCustCompany c");
           List auth=q.list();
           customerid=new Object[auth.size()];
           Iterator iterator=auth.iterator();
           while(iterator.hasNext()){
               Object[] val=(Object[])iterator.next();
                   tmodel.addElement(val[0]);  
                   customerid[i]=val[1];
                   i++;         
       }
       session.getTransaction().commit();
      }catch (HibernateException he) {
             errorFields = new JLabel("<HTML><FONT COLOR = Blue>'"+he.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"Dairy Management System",JOptionPane.ERROR_MESSAGE);

      }finally {
         session.close(); 
      }
       return tmodel;
     }
    
    private boolean del_company(int id){
       org.hibernate.Session session = HibernateUtil.getSessionFactory().openSession();
       Transaction tx = null;
       boolean status=false;
      try{
         tx = session.beginTransaction();
         DtCustCompany guarantor = (DtCustCompany)session.get(DtGuarantors.class, id); 
         if(guarantor!=null)
            session.delete(guarantor);
         tx.commit();
         status=true;
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+e.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"Dairy Management System",JOptionPane.ERROR_MESSAGE); 
      }finally {
         session.close(); 
      }
     return status;
   }
    
    private void cmbCustnameItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cmbCustnameItemStateChanged
        // TODO add your handling code here:
        try{
            DtCustCompany com=null;
            String type=sup.getValue(cmbCustname.getSelectedItem());
            if(cmbCustname.getSelectedIndex()!=-1) {
                int id=Integer.parseInt(customerid[cmbCustname.getSelectedIndex()].toString());
                com=this.find_company(id);                
                if(com!=null){
                   fillCustFields(com);
                   enableCustFields(false); 
                }
//                customer.CustomerSearch(customerid);
//                customer.getCustomerBal(customerid);
//                txtbalance.setText(customer.getBal());
                
            }
        }catch(Exception ex){
            errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+ex.getMessage()+"'.</FONT></HTML>");
            JOptionPane.showMessageDialog(null,errorFields,"Dairy Management System",JOptionPane.INFORMATION_MESSAGE);
        }
    }//GEN-LAST:event_cmbCustnameItemStateChanged

    private void cmbCustnameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cmbCustnameKeyReleased
        // TODO add your handling code here:
        try{
            String Pid=cmbCustname.getEditor().getItem().toString();
            //            cmbCustname.setModel(customer.searchCustomer("1",Pid));
            cmbCustname.showPopup();
            cmbCustname.setSelectedItem(Pid);
        }catch(Exception ex){

        }
    }//GEN-LAST:event_cmbCustnameKeyReleased

    private void jDateChooser3PropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_jDateChooser3PropertyChange
        // TODO add your handling code here:
        if(cmbCustname.getSelectedIndex()!=-1) {
//            String customerid=customer.Uid()[cmbCustname.getSelectedIndex()];
//            String date=new SimpleDateFormat("dd-MM-yyyy").format(jDateChooser3.getDate());
//            customer.getCustDateBal(customerid, date);
//            txtbalance.setText(customer.getBal());
//            cmbCustname.setSelectedIndex(-1);
        }
    }//GEN-LAST:event_jDateChooser3PropertyChange

    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton7ActionPerformed
        // TODO add your handling code here:
        cmbCustname.setSelectedIndex(-1);
        txtbalance.setText("0.00");
        CustresetFields();
        enableCustFields(true);
    }//GEN-LAST:event_jButton7ActionPerformed

    private void jButton9ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton9ActionPerformed
        // TODO add your handling code here:
        
        if(txtCname.getText().equals("")){
            errorFields = new JLabel("<HTML><FONT COLOR = BLUE>Company Not Found,Please Select a Record!.</FONT></HTML>");
            JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.INFORMATION_MESSAGE);
        }else{
            int id=Integer.getInteger(customerid[cmbCustname.getSelectedIndex()].toString());
            this.del_company(id);
        }
    }//GEN-LAST:event_jButton9ActionPerformed

    private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton8ActionPerformed
        // TODO add your handling code here:
        enableCustFields(true);
    }//GEN-LAST:event_jButton8ActionPerformed

    private void jButton10ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton10ActionPerformed
        // TODO add your handling code here:
        String companyname=txtCname.getText();
        String fname=txtfname.getText();
        String lname=txtfname.getText();
        String contact=txtcontact.getText();
        String phone=txtCphone.getText();
        String fax=txtCfax.getText();
        String altphone=txtaltphone.getText();
        String altcontact=txtaltcontact.getText();
        String email=txtCemail.getText();
        String cc=txtCcc.getText();
        String billto=txtABill.getText();
        String terms=txtterms.getText();
        String comments=txtcomment.getText();
        String sendmethod=cmbmail.getSelectedItem().toString();
        String date=new SimpleDateFormat("dd-MM-yyyy").format(new Date());
        String userId=userid;
        if(!companyname.equals("")||!contact.equals("")||!phone.equals("")){
            this.save_customer(companyname, fname, lname, contact, phone, fax, altphone, altcontact, email, cc, billto, terms, comments, sendmethod, date, userId);
            cmbCustname.setModel(searchCompany());
        }else{
            errorFields = new JLabel("<HTML><FONT COLOR = blue>Please make sure that required fileds are filled!.</FONT></HTML>");
            JOptionPane.showMessageDialog(null,errorFields,"Laundry Management System",JOptionPane.INFORMATION_MESSAGE);
        }
    }//GEN-LAST:event_jButton10ActionPerformed

    private void save_customer(String companyName, String fname, String lname, String contact, String phone, String fax, String aphone, String acontact, String email, String cc, String billTo, String terms, String comments, String sendmethod, String date, String userId){
         org.hibernate.Session session = HibernateUtil.getSessionFactory().openSession();
         Transaction tx = null;
         String date1=new SimpleDateFormat("dd-MM-yyyy").format( new Date());
         try{
            tx = session.beginTransaction();
            Query q = session.createQuery("FROM DtCustCompany c WHERE c.companyName=:name");
            q.setParameter("name", companyName);
            List results=q.list();
            Iterator iterator=results.iterator();
            DtCustCompany company=new DtCustCompany(companyName, fname, lname, contact, phone, fax, aphone, acontact, email, cc, billTo, terms, comments, sendmethod, date, userId);       
            if(!iterator.hasNext())                 
                 session.save(company);
            else
                 session.update(company);
            tx.commit();
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
            errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+e.getMessage()+"'</FONT></HTML>");
            JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE); 
      }finally {
         session.flush();
         session.close(); 
      }        
    }
    private void jButton11ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton11ActionPerformed
        // TODO add your handling code here:
        CustresetFields();
    }//GEN-LAST:event_jButton11ActionPerformed

    private void jButton12ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton12ActionPerformed
        // TODO add your handling code here:
        this.setVisible(false);
    }//GEN-LAST:event_jButton12ActionPerformed

    private void txtCfaxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtCfaxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtCfaxActionPerformed

    public void CustresetFields(){
    txtCname.setText("");
    txtfname.setText("");
    txtlname.setText("");
    txtcontact.setText("");
    txtCphone.setText("");
    txtCfax.setText("");
    txtaltphone.setText("");
    txtaltcontact.setText("");
    txtCemail.setText("");
    txtCcc.setText("");
    txtABill.setText("");
    txtterms.setText("");
    txtcomment.setText("");
    cmbmail.setSelectedIndex(0);    
  }
   public void enableCustFields(boolean state ){
    txtCname.setEnabled(state);
    txtfname.setEnabled(state);
    txtlname.setEnabled(state);
    txtcontact.setEnabled(state);
    txtCphone.setEnabled(state);
    txtCfax.setEnabled(state);
    txtaltphone.setEnabled(state);
    txtaltcontact.setEnabled(state);
    txtCemail.setEnabled(state);
    txtCcc.setEnabled(state);
    txtABill.setEnabled(state);
    txtterms.setEnabled(state);
    txtcomment.setEnabled(state);
    cmbmail.setSelectedIndex(0);  
} 
public int fillCustFields(DtCustCompany c){
    txtCname.setText(c.getCompanyName());
    txtfname.setText(c.getFname());
    txtlname.setText(c.getLname());
    txtcontact.setText(c.getContact());
    txtCphone.setText(c.getPhone());
    txtCfax.setText(c.getFax());
    txtaltphone.setText(c.getAphone());
    txtaltcontact.setText(c.getAcontact());
    txtCemail.setText(c.getEmail());
    txtCcc.setText(c.getCc());
    txtABill.setText(c.getBillTo());
    txtterms.setText(c.getTerms());
    txtcomment.setText(c.getComments());
    cmbmail.setSelectedItem(c.getSendmethod());
    return 0;
}   

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox cmbCustname;
    private javax.swing.JComboBox cmbmail;
    private javax.swing.JButton jButton10;
    private javax.swing.JButton jButton11;
    private javax.swing.JButton jButton12;
    private javax.swing.JButton jButton7;
    private javax.swing.JButton jButton8;
    private javax.swing.JButton jButton9;
    private com.toedter.calendar.JDateChooser jDateChooser3;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabel34;
    private javax.swing.JLabel jLabel35;
    private javax.swing.JLabel jLabel36;
    private javax.swing.JLabel jLabel37;
    private javax.swing.JLabel jLabel39;
    private javax.swing.JLabel jLabel40;
    private javax.swing.JLabel jLabel41;
    private javax.swing.JLabel jLabel42;
    private javax.swing.JLabel jLabel43;
    private javax.swing.JLabel jLabel44;
    private javax.swing.JLabel jLabel45;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel51;
    private javax.swing.JLabel jLabel52;
    private javax.swing.JLabel jLabel58;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTextArea txtABill;
    private javax.swing.JTextField txtCcc;
    private javax.swing.JTextField txtCemail;
    private javax.swing.JTextField txtCfax;
    private javax.swing.JTextField txtCname;
    private javax.swing.JTextField txtCphone;
    private javax.swing.JTextField txtaltcontact;
    private javax.swing.JTextField txtaltphone;
    private javax.swing.JTextField txtbalance;
    private javax.swing.JTextArea txtcomment;
    private javax.swing.JTextField txtcontact;
    private javax.swing.JTextField txtfname;
    private javax.swing.JTextField txtlname;
    private javax.swing.JTextArea txtterms;
    // End of variables declaration//GEN-END:variables
}
