/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package ui;

import classes.reports;
import classes.superCls;
import custom_jPanels.RoundRectGradientPanel;
import custom_jPanels.Translucent;
import farm.entity.DtConstants;
import farm.entity.DtDailycollection;
import farm.entity.VFarmerPayroll;
import farmTech.util.HibernateUtil;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.SwingWorker;
import net.sf.jasperreports.view.JasperViewer;
import org.hibernate.CacheMode;
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.ScrollMode;
import org.hibernate.ScrollableResults;
import org.hibernate.Session;
import org.hibernate.Transaction;

/**
 *
 * @author Kent
 */
public class constants_frame extends javax.swing.JInternalFrame {

    /**
     * Creates new form constants_frame
     */
    DtConstants con;
    deductions_frame deductions=new deductions_frame();
    superCls sup =new superCls();
    private JLabel errorFields;
    private String attendant="";
    public constants_frame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel2 = //new BackgroundPanel(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/images/Background.jpg")));
        new Translucent();
        jPanel1 = new RoundRectGradientPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        txtid = new javax.swing.JTextField();
        txtprate = new javax.swing.JTextField();
        txtsrate = new javax.swing.JTextField();
        txtloan = new javax.swing.JTextField();
        txtcredit = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jButton4 = new javax.swing.JButton();
        jLabel11 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jMonthChooser1 = new com.toedter.calendar.JMonthChooser();
        jYearChooser1 = new com.toedter.calendar.JYearChooser();
        jLabel12 = new javax.swing.JLabel();
        txt_shareRate = new javax.swing.JTextField();

        setClosable(true);
        setDefaultCloseOperation(javax.swing.WindowConstants.HIDE_ON_CLOSE);
        setIconifiable(true);
        setTitle("System Fixed data setup");
        setToolTipText("");
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setFrameIcon(new javax.swing.ImageIcon(getClass().getResource("/images/ox-cow.png"))); // NOI18N
        setVisible(false);

        jPanel2.setLayout(new java.awt.CardLayout());

        jPanel1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jPanel1.setFocusCycleRoot(true);
        jPanel1.setOpaque(false);

        jLabel1.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel1.setText("Id :");

        jLabel2.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel2.setText("Milk Sale_rate/Ltr :");

        jLabel3.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel3.setText("Max_loan:");

        jLabel4.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel4.setText("max_credit:");

        jLabel5.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel5.setText("Milk Payment_rate/Ltr :");

        txtid.setEditable(false);
        txtid.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtid.setToolTipText("");

        txtprate.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtprate.setText("0.00");
        txtprate.setToolTipText("");
        txtprate.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtprateKeyTyped(evt);
            }
        });

        txtsrate.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtsrate.setText("0.00");
        txtsrate.setToolTipText("");
        txtsrate.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtsrateFocusGained(evt);
            }
        });
        txtsrate.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtsrateKeyTyped(evt);
            }
        });

        txtloan.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtloan.setText("0.00");
        txtloan.setToolTipText("");
        txtloan.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtloanFocusGained(evt);
            }
        });
        txtloan.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtloanKeyTyped(evt);
            }
        });

        txtcredit.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txtcredit.setText("0.00");
        txtcredit.setToolTipText("");
        txtcredit.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtcreditFocusGained(evt);
            }
        });
        txtcredit.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtcreditKeyTyped(evt);
            }
        });

        jButton1.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton1.setText("Save");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton2.setText("Clear");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jButton3.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton3.setText("Delete");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jLabel7.setFont(new java.awt.Font("Segoe UI", 0, 12)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(255, 0, 51));
        jLabel7.setText("This panel allows the ");

        jLabel8.setFont(new java.awt.Font("Segoe UI", 0, 12)); // NOI18N
        jLabel8.setForeground(new java.awt.Color(255, 0, 51));
        jLabel8.setText("administrator to change the");

        jLabel9.setFont(new java.awt.Font("Segoe UI", 0, 12)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(255, 0, 51));
        jLabel9.setText("farmers payment rate, stores discount,");

        jLabel10.setFont(new java.awt.Font("Segoe UI", 0, 12)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(255, 0, 51));
        jLabel10.setText("loan and credit limit during borrowing");

        jButton4.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jButton4.setText("Reload");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        jLabel11.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel11.setText("Month:");

        jLabel6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/05.jpg"))); // NOI18N

        jLabel12.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        jLabel12.setText("Share Rate/Ltr :");

        txt_shareRate.setFont(new java.awt.Font("Trebuchet MS", 0, 11)); // NOI18N
        txt_shareRate.setText("0.00");
        txt_shareRate.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txt_shareRateFocusGained(evt);
            }
        });
        txt_shareRate.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txt_shareRateKeyTyped(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 205, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel10)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(jLabel6)
                                .addGap(80, 80, 80)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel11)
                                    .addComponent(jLabel4)
                                    .addComponent(jLabel3)
                                    .addComponent(jLabel2)
                                    .addComponent(jLabel5)
                                    .addComponent(jLabel1)
                                    .addComponent(jLabel12))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(jMonthChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(jYearChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addComponent(txtcredit, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                                        .addComponent(txtloan, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                                        .addComponent(txtsrate, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                                        .addComponent(txtprate, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                                        .addComponent(txtid, javax.swing.GroupLayout.DEFAULT_SIZE, 194, Short.MAX_VALUE)
                                        .addComponent(txt_shareRate)))))
                        .addGap(17, 17, 17))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(6, 6, 6)
                        .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 183, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 15, Short.MAX_VALUE)
                        .addComponent(jButton1)
                        .addGap(6, 6, 6)
                        .addComponent(jButton2)
                        .addGap(6, 6, 6)
                        .addComponent(jButton3)
                        .addGap(6, 6, 6)
                        .addComponent(jButton4)
                        .addContainerGap(31, Short.MAX_VALUE))))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel1))
                                    .addComponent(txtid, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(5, 5, 5)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel5))
                                    .addComponent(txtprate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(5, 5, 5)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel2))
                                    .addComponent(txtsrate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(5, 5, 5)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel3))
                                    .addComponent(txtloan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(6, 6, 6)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel4))
                                    .addComponent(txtcredit, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addGap(4, 4, 4)
                                        .addComponent(txt_shareRate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(jLabel12)))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jMonthChooser1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel11, javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jYearChooser1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 196, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(21, 21, 21)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel7)
                            .addComponent(jLabel8)))
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jButton1)
                        .addComponent(jButton2)
                        .addComponent(jButton3)
                        .addComponent(jButton4)))
                .addGap(6, 6, 6)
                .addComponent(jLabel9)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel10)
                .addGap(20, 20, 20))
        );

        jPanel2.add(jPanel1, "card2");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        // TODO add your handling code here:
        setFields();
    }//GEN-LAST:event_jButton4ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        // TODO add your handling code here:
        this.del_constant(1);
    }//GEN-LAST:event_jButton3ActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        // TODO add your handling code here:
        txtcredit.setText("");
        txtid.setText(sup.getCostValue(con.getId()));
        txtloan.setText("0.0");
        txtprate.setText("0.0");
        txtsrate.setText("0.0");
    }//GEN-LAST:event_jButton2ActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        String date=new SimpleDateFormat("dd-MM-yyyy").format(new Date());
        //      String date1=date.substring(3,date.length());
        Integer id=Integer.parseInt(sup.getIntValue(txtid));
        final double rate=Double.parseDouble(sup.getCostValue(txtprate.getText()));
        double saleRate=Double.parseDouble(sup.getCostValue(txtsrate.getText()));
        double maxLimitLoan=Double.parseDouble(sup.getCostValue(txtloan.getText()));
        double maxLimitCredit=Double.parseDouble(sup.getCostValue(txtcredit.getText()));
        final double share_rate=Double.parseDouble(sup.getCostValue(txt_shareRate.getText()));
        final int month=jMonthChooser1.getMonth()+1;
        final int year=jYearChooser1.getYear();
        if(this.update_constant(rate, saleRate,share_rate, maxLimitLoan, maxLimitCredit,date)){
            SwingWorker doComputeRate1= new SwingWorker() {
                @Override
                protected Integer doInBackground() throws Exception{
                   update_rate(month, year, rate);
                   update_Shares(month, year, share_rate,attendant);
                   return 0;
                }
                @Override
                protected void done(){
                try{
                     
                }catch(Exception ex){
                }
                }
                public void finished() {
                }
	};
        doComputeRate1.execute();
            
            
        }
    }//GEN-LAST:event_jButton1ActionPerformed

    private void txtcreditKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtcreditKeyTyped
        // TODO add your handling code here:
        sup.field_validation(txtcredit, evt);
    }//GEN-LAST:event_txtcreditKeyTyped

    private void txt_shareRateKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_shareRateKeyTyped
        // TODO add your handling code here:
        sup.field_validation(txt_shareRate, evt);
    }//GEN-LAST:event_txt_shareRateKeyTyped

    private void txtloanKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtloanKeyTyped
        // TODO add your handling code here:
        sup.field_validation(txt_shareRate, evt);
    }//GEN-LAST:event_txtloanKeyTyped

    private void txtsrateKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtsrateKeyTyped
        // TODO add your handling code here:
        sup.field_validation(txtsrate, evt);
    }//GEN-LAST:event_txtsrateKeyTyped

    private void txtprateKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtprateKeyTyped
        // TODO add your handling code here:
        sup.field_validation(txtprate, evt);
    }//GEN-LAST:event_txtprateKeyTyped

    private void txt_shareRateFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txt_shareRateFocusGained
        // TODO add your handling code here:
        txt_shareRate.selectAll();
    }//GEN-LAST:event_txt_shareRateFocusGained

    private void txtsrateFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtsrateFocusGained
        // TODO add your handling code here:
        txtsrate.selectAll();
    }//GEN-LAST:event_txtsrateFocusGained

    private void txtloanFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtloanFocusGained
        // TODO add your handling code here:
        txtloan.selectAll();
    }//GEN-LAST:event_txtloanFocusGained

    private void txtcreditFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtcreditFocusGained
        // TODO add your handling code here:
        txtcredit.selectAll();
    }//GEN-LAST:event_txtcreditFocusGained

    public void formload(String attendant){
      this.constantSearch(1); 
      this.attendant=attendant;
    }
    
    public void constantSearch(int id ){
       Session session = HibernateUtil.getSessionFactory().openSession();
       Transaction tx = null;
      try{
         tx = session.beginTransaction();
          con= (DtConstants)session.get(DtConstants.class, id);
          if(con!=null)
              setFields();
          tx.commit();
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
               e.printStackTrace(); 
      }finally {
         session.close(); 
      }
   }
    
    public boolean update_constant(double rate, double saleRate,double shareRate, double maxLimitLoan, double maxLimitCredit,String date){
      Session session = HibernateUtil.getSessionFactory().openSession();      
      Transaction tx = null;
      int val=0;
      boolean state=false;
      try{          
            DtConstants constant=new DtConstants(rate, saleRate, shareRate, maxLimitLoan, maxLimitCredit,date); 
            tx = session.beginTransaction();
            con= (DtConstants)session.get(DtConstants.class, 1);
            if(con==null){
              session.save(constant); 
              errorFields = new JLabel("<HTML><FONT COLOR = Blue>New information Entered successfully</FONT></HTML>");
              JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE); 
           }else{
                con.setMaxLimitCredit(maxLimitCredit);
                con.setMaxLimitLoan(maxLimitLoan);
                con.setRate(rate);
                con.setSaleRate(saleRate);
                con.setShareRate(shareRate);
                session.update(con);
                errorFields = new JLabel("<HTML><FONT COLOR = Blue>Data successfully updated!</FONT></HTML>");
                JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE); 
            }           
            tx.commit();
            state=true;
            
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             e.printStackTrace(); 
      }finally {
         session.flush();
         session.close(); 
      }
      return state;
   }
    
    public boolean del_constant(int id){
      Session session = HibernateUtil.getSessionFactory().openSession();      
      Transaction tx = null;
      int val=0;
      boolean state=false;
      try{          
            tx = session.beginTransaction(); 
            con= (DtConstants)session.get(DtConstants.class, 1);
            session.delete(con);
            errorFields = new JLabel("<HTML><FONT COLOR = Blue>Data deleted!</FONT></HTML>");
            JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE);           
            tx.commit();
            state=true;
            
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             errorFields = new JLabel("<HTML><FONT COLOR = Blue>'"+e.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.ERROR_MESSAGE);   
      }finally {
         session.flush();
         session.close(); 
      }
      return state;
   }
    
    public boolean update_rate(int month,  int year,double rate){
      Session session = HibernateUtil.getSessionFactory().openSession();
      Transaction tx = null;
      String farmerID = null;
      boolean state=false;
      try{
         tx = session.beginTransaction();
         Query q = session.createQuery("from DtDailycollection cof where Month(cof.date)=:month and Year(cof.date)=:year");
         q.setParameter("month", month);
         q.setParameter("year", year);
         q.setCacheMode(CacheMode.IGNORE);
         q.scroll(ScrollMode.FORWARD_ONLY);
         ScrollableResults auth=q.scroll();//list();              
          int i=0;     
//         Iterator iterator=auth.iterator();
         while(auth.next()){
             DtDailycollection collec = (DtDailycollection)auth.get(0);
             collec.setRate(rate);
             session.update(collec);
             if ( ++i % 20 == 0 ) {
                //flush a batch of updates and release memory:
                session.flush();
                session.clear();
              }
               errorFields = new JLabel("<HTML><FONT COLOR = BLUE>Transaction completed successfully</FONT></HTML>");
         }
         tx.commit();
         state=true;         
         JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.INFORMATION_MESSAGE);
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+e.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.INFORMATION_MESSAGE);
      }finally {
         session.close(); 
      }
      return state;
   }
    
    public boolean update_Shares(int month,  int year,double rate,String attendant){
      Session session = HibernateUtil.getSessionFactory().openSession();
      Transaction tx = null;
      boolean state=false;
      String date=new SimpleDateFormat("dd-MM-yyyy").format(new Date());
      try{
         tx = session.beginTransaction();
         Query q = session.createQuery("from VFarmerPayroll cof where Month(cof.date)=:month and Year(cof.date)=:year");
         q.setParameter("month", month);
         q.setParameter("year", year);
         q.setCacheMode(CacheMode.IGNORE);
         q.scroll(ScrollMode.FORWARD_ONLY);
         ScrollableResults auth=q.scroll();//list();              
         int i=0;     
//         Iterator iterator=auth.iterator();
         while(auth.next()){
             VFarmerPayroll collec = (VFarmerPayroll)auth.get(0);
             Double share=collec.getQuantity()*rate;
             date=new SimpleDateFormat("dd-MM-yyyy").format(collec.getDate());
             deductions.farmer_acc(collec.getFarmerId(), sup.sqlDate(date), "SHARES", "Milk",  0.00, share , attendant);
         }
         tx.commit();
         state=true;         
//         JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.INFORMATION_MESSAGE);
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
             errorFields = new JLabel("<HTML><FONT COLOR = BLUE>'"+e.getMessage()+"'</FONT></HTML>");
             JOptionPane.showMessageDialog(null,errorFields,"DMS",JOptionPane.INFORMATION_MESSAGE);
      }finally {
         session.close(); 
      }
      return state;
   }
    
   public void setFields(){
    txtcredit.setText(sup.getCostValue(con.getMaxLimitCredit()));
    txtid.setText(sup.getCostValue(con.getId()));
    txt_shareRate.setText(sup.getCostValue(con.getShareRate()));
    txtloan.setText(sup.getCostValue(con.getMaxLimitLoan()));
    txtprate.setText(sup.getCostValue(con.getRate()));
    txtsrate.setText(sup.getCostValue(con.getSaleRate()));
   } 
    

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private com.toedter.calendar.JMonthChooser jMonthChooser1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private com.toedter.calendar.JYearChooser jYearChooser1;
    private javax.swing.JTextField txt_shareRate;
    private javax.swing.JTextField txtcredit;
    private javax.swing.JTextField txtid;
    private javax.swing.JTextField txtloan;
    private javax.swing.JTextField txtprate;
    private javax.swing.JTextField txtsrate;
    // End of variables declaration//GEN-END:variables
}
